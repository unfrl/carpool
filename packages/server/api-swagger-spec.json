{"swagger":"2.0","info":{"description":"Free carpool app for cool peeps and their friends","version":"1.0","title":"Carpool API"},"basePath":"/","tags":[],"schemes":["http"],"securityDefinitions":{"bearer":{"type":"apiKey","name":"Authorization","in":"header"}},"paths":{"/api/v1/auth/signup":{"post":{"summary":"Sign up","description":"Sign up a new user","operationId":"signUp","parameters":[{"name":"SignUpDto","required":true,"in":"body","schema":{"$ref":"#/definitions/SignUpDto"}}],"responses":{"200":{"description":""}},"tags":["Auth"],"produces":["application/json"],"consumes":["application/json"]}},"/api/v1/auth/signin":{"post":{"summary":"Sign in","description":"Sign in an existing user","operationId":"signIn","parameters":[{"name":"SignInDto","required":true,"in":"body","schema":{"$ref":"#/definitions/SignInDto"}}],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/AuthDto"}}},"tags":["Auth"],"produces":["application/json"],"consumes":["application/json"]}},"/api/v1/auth/signinwithgoogle":{"post":{"summary":"Sign in with Google","description":"Sign in using a google user's idToken. This will create a user if it doesnt exist. It might also request further steps, such as setting a display name.","operationId":"signInWithGoogle","parameters":[{"name":"GoogleSignInDto","required":true,"in":"body","schema":{"$ref":"#/definitions/GoogleSignInDto"}}],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/SocialAuthDto"}}},"tags":["Auth"],"produces":["application/json"],"consumes":["application/json"]}},"/api/v1/auth/requestpasswordreset":{"post":{"summary":"Request Password Reset","description":"Sends a password reset to the specified email if it exists","operationId":"requestPasswordReset","parameters":[{"name":"PasswordResetRequestDto","required":true,"in":"body","schema":{"$ref":"#/definitions/PasswordResetRequestDto"}}],"responses":{"200":{"description":""}},"tags":["Auth"],"produces":["application/json"],"consumes":["application/json"]}},"/api/v1/auth/resetpassword":{"put":{"summary":"Reset User Password","description":"Reset a User's password using the token emailed to them after requesting a password reset","operationId":"resetPassword","parameters":[{"name":"PasswordResetDto","required":true,"in":"body","schema":{"$ref":"#/definitions/PasswordResetDto"}}],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/AuthDto"}}},"tags":["Auth"],"produces":["application/json"],"consumes":["application/json"]}},"/api/v1/users/me":{"get":{"summary":"Get user profile","description":"Gets the current user's profile","operationId":"getMyProfile","responses":{"200":{"description":"","schema":{"$ref":"#/definitions/UserDto"}}},"tags":["Users"],"security":[{"bearer":[]}],"produces":["application/json"],"consumes":["application/json"]}},"/api/v1/users/me/carpools":{"get":{"summary":"Get user's carpools","description":"Gets a collection of carpools created by the current user","operationId":"getMyCarpools","responses":{"200":{"description":"","schema":{"type":"array","items":{"$ref":"#/definitions/CarpoolDto"}}}},"tags":["Users"],"security":[{"bearer":[]}],"produces":["application/json"],"consumes":["application/json"]}},"/api/v1/users/{displayName}/carpools":{"get":{"summary":"Get a user's carpools","description":"Get a user's carpools by their display name","operationId":"getUserCarpools","parameters":[{"type":"string","name":"displayName","required":true,"in":"path"}],"responses":{"200":{"description":"","schema":{"type":"array","items":{"$ref":"#/definitions/CarpoolDto"}}}},"tags":["Users"],"security":[{"bearer":[]}],"produces":["application/json"],"consumes":["application/json"]}},"/api/v1/carpools":{"post":{"summary":"Create Carpool","description":"Create a new Carpool","operationId":"createCarpool","parameters":[{"name":"UpsertCarpoolDto","required":true,"in":"body","schema":{"$ref":"#/definitions/UpsertCarpoolDto"}}],"responses":{"201":{"description":"","schema":{"$ref":"#/definitions/CarpoolDto"}}},"tags":["Carpools"],"security":[{"bearer":[]}],"produces":["application/json"],"consumes":["application/json"]}},"/api/v1/carpools/{id}":{"get":{"summary":"Get Carpool","description":"Retrieve a Carpool by its GUID or its URL ID","operationId":"getCarpool","parameters":[{"type":"string","name":"id","required":true,"in":"path"}],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/CarpoolDto"}}},"tags":["Carpools"],"security":[{"bearer":[]}],"produces":["application/json"],"consumes":["application/json"]},"put":{"summary":"Update Carpool","description":"Update a Carpool","operationId":"updateCarpool","parameters":[{"name":"UpsertCarpoolDto","required":true,"in":"body","schema":{"$ref":"#/definitions/UpsertCarpoolDto"}},{"type":"string","name":"id","required":true,"in":"path"}],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/CarpoolDto"}}},"tags":["Carpools"],"security":[{"bearer":[]}],"produces":["application/json"],"consumes":["application/json"]},"delete":{"summary":"Delete Carpool","description":"Delete a Carpool","operationId":"deleteCarpool","parameters":[{"type":"string","name":"id","required":true,"in":"path"}],"responses":{"204":{"description":""}},"tags":["Carpools"],"security":[{"bearer":[]}],"produces":["application/json"],"consumes":["application/json"]}},"/api/v1/carpools/{id}/drivers":{"post":{"summary":"Create Driver","description":"Create a driver for a carpool","operationId":"createDriver","parameters":[{"name":"UpsertDriverDto","required":true,"in":"body","schema":{"$ref":"#/definitions/UpsertDriverDto"}},{"type":"string","name":"id","required":true,"in":"path"}],"responses":{"201":{"description":"","schema":{"$ref":"#/definitions/DriverDto"}}},"tags":["Drivers"],"security":[{"bearer":[]}],"produces":["application/json"],"consumes":["application/json"]},"get":{"summary":"Get Drivers","description":"Get all the drivers signed up for a carpool","operationId":"getDrivers","parameters":[{"type":"string","name":"id","required":true,"in":"path"}],"responses":{"200":{"description":"","schema":{"type":"array","items":{"$ref":"#/definitions/DriverDto"}}}},"tags":["Drivers"],"security":[{"bearer":[]}],"produces":["application/json"],"consumes":["application/json"]}},"/api/v1/drivers/{id}/passengers":{"post":{"summary":"Create Passenger","description":"Creates a passenger based off the current user ","operationId":"createPassenger","parameters":[{"name":"UpsertPassengerDto","required":true,"in":"body","schema":{"$ref":"#/definitions/UpsertPassengerDto"}},{"type":"string","name":"id","required":true,"in":"path"}],"responses":{"201":{"description":"","schema":{"$ref":"#/definitions/PassengerDto"}}},"tags":["Passengers"],"security":[{"bearer":[]}],"produces":["application/json"],"consumes":["application/json"]},"delete":{"summary":"Delete Passenger","description":"Deletes a passenger based off the current user ","operationId":"deletePassenger","parameters":[{"type":"string","name":"id","required":true,"in":"path"}],"responses":{"204":{"description":""}},"tags":["Passengers"],"security":[{"bearer":[]}],"produces":["application/json"],"consumes":["application/json"]},"get":{"summary":"Get Passengers","description":"Get passengers for a driver","operationId":"getPassengers","parameters":[{"type":"string","name":"id","required":true,"in":"path"}],"responses":{"200":{"description":"","schema":{"type":"array","items":{"$ref":"#/definitions/PassengerDto"}}}},"tags":["Passengers"],"security":[{"bearer":[]}],"produces":["application/json"],"consumes":["application/json"]}},"/api/v1/verification":{"put":{"summary":"Verify User","description":"Verify a User using the token emailed to them during account creation","operationId":"verifyUser","parameters":[{"name":"VerificationDto","required":true,"in":"body","schema":{"$ref":"#/definitions/VerificationDto"}}],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/AuthDto"}}},"tags":["Verification"],"produces":["application/json"],"consumes":["application/json"]}}},"definitions":{"SignUpDto":{"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"},"displayName":{"type":"string"}},"required":["email","password","displayName"]},"SignInDto":{"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"}},"required":["email","password"]},"AuthDto":{"type":"object","properties":{"accessToken":{"type":"string"}},"required":["accessToken"]},"GoogleSignInDto":{"type":"object","properties":{"idToken":{"type":"string"},"displayName":{"type":"string"}},"required":["idToken"]},"SocialAuthDto":{"type":"object","properties":{"accessToken":{"type":"string"},"nextStep":{"type":"number"}},"required":["accessToken","nextStep"]},"PasswordResetRequestDto":{"type":"object","properties":{"email":{"type":"string"}},"required":["email"]},"PasswordResetDto":{"type":"object","properties":{"email":{"type":"string"},"token":{"type":"string"},"newPassword":{"type":"string"}},"required":["email","token","newPassword"]},"UserDto":{"type":"object","properties":{"id":{"type":"string"},"email":{"type":"string"},"displayName":{"type":"string"}},"required":["id","email","displayName"]},"Date":{"type":"object","properties":{}},"CarpoolDto":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"urlId":{"type":"string"},"destination":{"type":"string"},"dateTime":{"$ref":"#/definitions/Date"},"created":{"$ref":"#/definitions/Date"},"updated":{"$ref":"#/definitions/Date"},"user":{"$ref":"#/definitions/UserDto"}},"required":["id","name","urlId","destination","dateTime","created","updated","user"]},"UpsertCarpoolDto":{"type":"object","properties":{"carpoolName":{"type":"string"},"destination":{"type":"string"},"dateTime":{"$ref":"#/definitions/Date"}},"required":["carpoolName","destination","dateTime"]},"Car":{"type":"object","properties":{"capacity":{"type":"number"},"color":{"type":"string"},"type":{"type":"string","enum":["sedan","truck","suv","van"]}},"required":["capacity","color","type"]},"UpsertDriverDto":{"type":"object","properties":{"car":{"$ref":"#/definitions/Car"}},"required":["car"]},"DriverDto":{"type":"object","properties":{"id":{"type":"string"},"car":{"$ref":"#/definitions/Car"},"carpoolId":{"type":"string"},"user":{"$ref":"#/definitions/UserDto"},"seatsRemaining":{"type":"number"},"passengerUserIds":{"type":"array","items":{"type":"string"}}},"required":["id","car","carpoolId","user","seatsRemaining","passengerUserIds"]},"UpsertPassengerDto":{"type":"object","properties":{"phoneNumber":{"type":"string"},"address":{"type":"string"}},"required":["address"]},"PassengerDto":{"type":"object","properties":{"id":{"type":"string"},"phoneNumber":{"type":"string"},"address":{"type":"string"},"user":{"$ref":"#/definitions/UserDto"},"driverId":{"type":"string"}},"required":["id","phoneNumber","address","user","driverId"]},"VerificationDto":{"type":"object","properties":{"email":{"type":"string"},"token":{"type":"string"}},"required":["email","token"]}}}