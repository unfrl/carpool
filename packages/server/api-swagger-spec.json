{"openapi":"3.0.0","info":{"title":"Carpool API","description":"Free carpool app for cool peeps and their friends","version":"1.0","contact":{}},"tags":[],"servers":[],"components":{"securitySchemes":{"bearer":{"scheme":"bearer","bearerFormat":"JWT","type":"http"}},"schemas":{"SignUpDto":{"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"},"displayName":{"type":"string"}},"required":["email","password","displayName"]},"SignInDto":{"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"}},"required":["email","password"]},"AuthDto":{"type":"object","properties":{"accessToken":{"type":"string"}},"required":["accessToken"]},"GoogleSignInDto":{"type":"object","properties":{"idToken":{"type":"string"},"displayName":{"type":"string"}},"required":["idToken"]},"SocialAuthDto":{"type":"object","properties":{"accessToken":{"type":"string"},"nextStep":{"type":"number"},"error":{"type":"string"}},"required":["accessToken","nextStep","error"]},"PasswordResetRequestDto":{"type":"object","properties":{"email":{"type":"string"}},"required":["email"]},"PasswordResetDto":{"type":"object","properties":{"email":{"type":"string"},"token":{"type":"string"},"newPassword":{"type":"string"}},"required":["email","token","newPassword"]},"UserDto":{"type":"object","properties":{"id":{"type":"string"},"email":{"type":"string"},"displayName":{"type":"string"}},"required":["id","email","displayName"]},"CarpoolMetadataDto":{"type":"object","properties":{"seatsRemaining":{"type":"number"},"driverCount":{"type":"number"}},"required":["seatsRemaining","driverCount"]},"CarpoolDto":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"description":{"type":"string"},"urlId":{"type":"string"},"destination":{"type":"string"},"dateTime":{"format":"date-time","type":"string"},"created":{"format":"date-time","type":"string"},"updated":{"format":"date-time","type":"string"},"user":{"$ref":"#/components/schemas/UserDto"},"metadata":{"$ref":"#/components/schemas/CarpoolMetadataDto"}},"required":["id","name","description","urlId","destination","dateTime","created","updated","user","metadata"]},"CarpoolQueryResponseDto":{"type":"object","properties":{"carpool":{"$ref":"#/components/schemas/CarpoolDto"},"type":{"type":"string","enum":["created","driving","passenger"]}},"required":["carpool","type"]},"UpsertCarpoolDto":{"type":"object","properties":{"carpoolName":{"type":"string"},"description":{"type":"string"},"destination":{"type":"string"},"dateTime":{"format":"date-time","type":"string"}},"required":["carpoolName","destination","dateTime"]},"Car":{"type":"object","properties":{"capacity":{"type":"number"},"color":{"type":"string"},"type":{"type":"string","enum":["sedan","truck","suv","van"]}},"required":["capacity","color","type"]},"UpsertDriverDto":{"type":"object","properties":{"car":{"$ref":"#/components/schemas/Car"}},"required":["car"]},"PassengerDto":{"type":"object","properties":{"id":{"type":"string"},"phoneNumber":{"type":"string"},"address":{"type":"string"},"user":{"$ref":"#/components/schemas/UserDto"},"driverId":{"type":"string"}},"required":["id","phoneNumber","address","user","driverId"]},"DriverDto":{"type":"object","properties":{"id":{"type":"string"},"car":{"$ref":"#/components/schemas/Car"},"carpoolId":{"type":"string"},"user":{"$ref":"#/components/schemas/UserDto"},"seatsRemaining":{"type":"number"},"passengerUserIds":{"type":"array","items":{"type":"string"}},"passengers":{"type":"array","items":{"$ref":"#/components/schemas/PassengerDto"}}},"required":["id","car","carpoolId","user","seatsRemaining","passengerUserIds","passengers"]},"UpsertPassengerDto":{"type":"object","properties":{"phoneNumber":{"type":"string"},"address":{"type":"string"}},"required":["address"]},"VerificationDto":{"type":"object","properties":{"email":{"type":"string"},"token":{"type":"string"}},"required":["email","token"]}}},"paths":{"/api/v1/auth/signup":{"post":{"operationId":"signUp","summary":"Sign up","description":"Sign up a new user","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignUpDto"}}}},"responses":{"200":{"description":""}},"tags":["Auth"]}},"/api/v1/auth/signin":{"post":{"operationId":"signIn","summary":"Sign in","description":"Sign in an existing user","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignInDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthDto"}}}}},"tags":["Auth"]}},"/api/v1/auth/signinwithgoogle":{"post":{"operationId":"signInWithGoogle","summary":"Sign in with Google","description":"Sign in using a google user's idToken. This will create a user if it doesnt exist. It might also request further steps, such as setting a display name.","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GoogleSignInDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SocialAuthDto"}}}}},"tags":["Auth"]}},"/api/v1/auth/requestpasswordreset":{"post":{"operationId":"requestPasswordReset","summary":"Request Password Reset","description":"Sends a password reset to the specified email if it exists","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordResetRequestDto"}}}},"responses":{"200":{"description":""}},"tags":["Auth"]}},"/api/v1/auth/resetpassword":{"put":{"operationId":"resetPassword","summary":"Reset User Password","description":"Reset a User's password using the token emailed to them after requesting a password reset","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordResetDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthDto"}}}}},"tags":["Auth"]}},"/api/v1/users/me":{"get":{"operationId":"getMyProfile","summary":"Get user profile","description":"Gets the current user's profile","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDto"}}}}},"tags":["Users"],"security":[{"bearer":[]}]}},"/api/v1/users/me/carpools":{"get":{"operationId":"getMyCarpools","summary":"Get user's carpools","description":"Gets a collection of carpools created by the current user","parameters":[{"name":"type","required":true,"in":"query","description":"CSV w/ one or more available options: created,driving,passenger","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CarpoolQueryResponseDto"}}}}}},"tags":["Users"],"security":[{"bearer":[]}]}},"/api/v1/users/{displayName}/carpools":{"get":{"operationId":"getUserCarpools","summary":"Get a user's carpools","description":"Get a user's carpools by their display name","parameters":[{"name":"displayName","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CarpoolDto"}}}}}},"tags":["Users"]}},"/api/v1/carpools":{"post":{"operationId":"createCarpool","summary":"Create Carpool","description":"Create a new Carpool","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpsertCarpoolDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CarpoolDto"}}}}},"tags":["Carpools"],"security":[{"bearer":[]}]}},"/api/v1/carpools/{id}":{"get":{"operationId":"getCarpool","summary":"Get Carpool","description":"Retrieve a Carpool by its GUID or its URL ID","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"includeMetadata","required":true,"in":"query","schema":{"type":"boolean"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CarpoolDto"}}}}},"tags":["Carpools"]},"put":{"operationId":"updateCarpool","summary":"Update Carpool","description":"Update a Carpool","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpsertCarpoolDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CarpoolDto"}}}}},"tags":["Carpools"],"security":[{"bearer":[]}]},"delete":{"operationId":"deleteCarpool","summary":"Delete Carpool","description":"Delete a Carpool","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"204":{"description":""}},"tags":["Carpools"],"security":[{"bearer":[]}]}},"/api/v1/carpools/{id}/drivers":{"post":{"operationId":"createDriver","summary":"Create Driver","description":"Create a driver for a carpool","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpsertDriverDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DriverDto"}}}}},"tags":["Drivers"],"security":[{"bearer":[]}]},"get":{"operationId":"getDrivers","summary":"Get Drivers","description":"Get all the drivers signed up for a carpool","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DriverDto"}}}}}},"tags":["Drivers"],"security":[{"bearer":[]}]}},"/api/v1/carpools/{id}/drivers/{driverId}":{"delete":{"operationId":"deleteDriver","summary":"Delete Driver","description":"Delete the specified driver, email any of their passengers","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"driverId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"204":{"description":""}},"tags":["Drivers"],"security":[{"bearer":[]},{"bearer":[]}]}},"/api/v1/drivers/{id}/passengers":{"post":{"operationId":"createPassenger","summary":"Create Passenger","description":"Creates a passenger based off the current user ","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpsertPassengerDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PassengerDto"}}}}},"tags":["Passengers"],"security":[{"bearer":[]}]},"delete":{"operationId":"deletePassenger","summary":"Delete Passenger","description":"Deletes a passenger based off the current user","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"204":{"description":""}},"tags":["Passengers"],"security":[{"bearer":[]}]},"get":{"operationId":"getPassengers","summary":"Get Passengers","description":"Get passengers for a driver","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PassengerDto"}}}}}},"tags":["Passengers"],"security":[{"bearer":[]}]}},"/api/v1/verification":{"put":{"operationId":"verifyUser","summary":"Verify User","description":"Verify a User using the token emailed to them during account creation","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VerificationDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthDto"}}}}},"tags":["Verification"]}}}}